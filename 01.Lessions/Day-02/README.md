# Day 02 

## üíõSession 02 - Normalization

### üí• C√°c b∆∞·ªõc ph√¢n t√≠ch, thi·∫øt k·∫ø CSDL

Trong thi·∫øt k·∫ø CSDL SQL Server, c√°c kh√°i ni·ªám Normal 1 (1NF), Normal 2 (2NF) v√† Normal 3 (3NF) li√™n quan ƒë·∫øn quy t·∫Øc b·∫£o to√†n t√≠nh nguy√™n v·∫πn d·ªØ li·ªáu trong qu√° tr√¨nh l∆∞u tr·ªØ v√† truy xu·∫•t d·ªØ li·ªáu. 

C√°c nguy√™n t·∫Øc chu·∫©n h√≥a gi√∫p tƒÉng t√≠nh nh·∫•t qu√°n, hi·ªáu qu·∫£ v√† d·ªÖ qu·∫£n l√Ω cho CSDL SQL Server, gi√∫p tr√°nh c√°c v·∫•n ƒë·ªÅ nh∆∞ s·ª± l·∫∑p l·∫°i d·ªØ li·ªáu, ph·ª• thu·ªôc phi ch·ª©c nƒÉng v√† kh√¥ng nh·∫•t qu√°n d·ªØ li·ªáu.

---

### üí• X√©t v√≠ d·ª• (Normalization)

| EmployeeId | ProjectId | ProjectName       | EmployeeName | Grade | Salary |
|------------|-----------|-------------------|--------------|-------|--------|
| 142        | 113, 124  | BLUE STAR, MAGNUM | John         | A     | 20,000 |
| 168        | 113       | BLUE STAR         | James        | B     | 15,000 |
| 263        | 113       | BLUE STAR         | Andrew       | C     | 10,000 |
| 109        | 124       | MAGNUM            | Bob          | C     | 10,000 |

B·∫£ng tr√™n bao g·ªìm c√°c ƒëi·ªÉm d·ªã th∆∞·ªùng sau:

- Insertion Anomaly
- Deletion Anomaly
- Updation Anomaly
- Redundancy / Duplication / Repetition

---

#### üîπ ƒêi·ªÉm d·ªã th∆∞·ªùng v·ªÅ INSERTION

- C·ªôt "ProjectId" trong h√†ng ƒë·∫ßu ti√™n c√≥ gi√° tr·ªã "113, 124". ƒêi·ªÅu n√†y ch·ªâ ra r·∫±ng m·ªôt nh√¢n vi√™n c√≥ th·ªÉ tham gia v√†o nhi·ªÅu d·ª± √°n (113 v√† 124). Tuy nhi√™n, trong c√°c h√†ng ti·∫øp theo, c·ªôt "ProjectId" ch·ªâ ch·ª©a m·ªôt gi√° tr·ªã duy nh·∫•t cho m·ªói h√†ng. ƒêi·ªÅu n√†y t·∫°o ra s·ª± kh√¥ng nh·∫•t qu√°n trong d·ªØ li·ªáu khi INSERT v√†o b·∫£ng.
- C·ªôt "ProjectName" trong h√†ng ƒë·∫ßu ti√™n c√≥ gi√° tr·ªã "BLUE STAR, MAGNUM", ch·ªâ ra r·∫±ng d·ª± √°n n√†y c√≥ t√™n g·ªìm hai ph·∫ßn "BLUE STAR" v√† "MAGNUM". Tuy nhi√™n, trong c√°c h√†ng ti·∫øp theo, c·ªôt "ProjectName" ch·ªâ ch·ª©a m·ªôt t√™n d·ª± √°n duy nh·∫•t cho m·ªói h√†ng. ƒêi·ªÅu n√†y c≈©ng t·∫°o ra s·ª± kh√¥ng nh·∫•t qu√°n trong d·ªØ li·ªáu khi INSERT v√†o b·∫£ng.

>L∆ØU √ù
ƒêi·ªÉm d·ªã th∆∞·ªùng INSERTION tr√™n li√™n quan ƒë·∫øn vi·ªác ch√®n (INSERT) d·ªØ li·ªáu v√†o b·∫£ng, khi c√°c gi√° tr·ªã c·ªßa c·ªôt "ProjectId" v√† "ProjectName" kh√¥ng ƒë∆∞·ª£c ƒë·ªìng nh·∫•t cho c√°c h√†ng t∆∞∆°ng ·ª©ng. ƒêi·ªÅu n√†y c·∫ßn ƒë∆∞·ª£c s·ª≠a ch·ªØa ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v√† chu·∫©n h√≥a d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu.

---

#### üîπƒêi·ªÉm d·ªã th∆∞·ªùng v·ªÅ DELETION

- N·∫øu b·∫°n mu·ªën x√≥a th√¥ng tin v·ªÅ m·ªôt d·ª± √°n c·ª• th·ªÉ, v√≠ d·ª• nh∆∞ d·ª± √°n c√≥ "ProjectId" l√† 113, vi·ªác x√≥a d·ª± √°n n√†y s·∫Ω kh√¥ng ch·ªâ x√≥a h√†ng ch·ª©a d·ª± √°n n√†y m√† c√≤n ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c h√†ng kh√°c. V√≠ d·ª•, n·∫øu b·∫°n x√≥a h√†ng ch·ª©a d·ª± √°n c√≥ "ProjectId" l√† 113, th√¨ h√†ng c·ªßa nh√¢n vi√™n James v√† Andrew c≈©ng s·∫Ω b·ªã x√≥a v√¨ c·∫£ hai nh√¢n vi√™n n√†y ƒë·ªÅu tham gia d·ª± √°n 113. ƒêi·ªÅu n√†y g√¢y ra s·ª± kh√¥ng nh·∫•t qu√°n v√† m·∫•t m√°t d·ªØ li·ªáu trong b·∫£ng.
- N·∫øu b·∫°n mu·ªën x√≥a th√¥ng tin v·ªÅ m·ªôt nh√¢n vi√™n c·ª• th·ªÉ, vi·ªác x√≥a nh√¢n vi√™n n√†y c≈©ng s·∫Ω ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c h√†ng kh√°c. V√≠ d·ª•, n·∫øu b·∫°n x√≥a h√†ng ch·ª©a th√¥ng tin v·ªÅ nh√¢n vi√™n James, th√¨ h√†ng c·ªßa d·ª± √°n c√≥ "ProjectId" l√† 113 c≈©ng s·∫Ω b·ªã x√≥a v√¨ nh√¢n vi√™n James tham gia d·ª± √°n 113. ƒêi·ªÅu n√†y c≈©ng d·∫´n ƒë·∫øn s·ª± kh√¥ng nh·∫•t qu√°n v√† m·∫•t m√°t d·ªØ li·ªáu trong b·∫£ng.

>L∆ØU √ù:
ƒêi·ªÉm d·ªã th∆∞·ªùng DELETION tr√™n li√™n quan ƒë·∫øn vi·ªác x√≥a d·ªØ li·ªáu trong b·∫£ng, khi vi·ªác x√≥a m·ªôt h√†ng c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c h√†ng kh√°c trong b·∫£ng. ƒêi·ªÅu n√†y c·∫ßn ƒë∆∞·ª£c x·ª≠ l√Ω m·ªôt c√°ch th√≠ch h·ª£p ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v√† b·∫£o to√†n d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu.

---

#### üîπ ƒêi·ªÉm d·ªã th∆∞·ªùng v·ªÅ UPDATION

- C·ªôt "ProjectId": ƒêi·ªÉm d·ªã th∆∞·ªùng ·ªü ƒë√¢y l√† c·∫≠p nh·∫≠t gi√° tr·ªã c·ªßa c·ªôt "ProjectId" trong m·ªôt h√†ng. V√¨ c·ªôt "ProjectId" trong b·∫£ng ghi ƒë·∫ßu ti√™n ch·ª©a gi√° tr·ªã "113, 124", vi·ªác c·∫≠p nh·∫≠t gi√° tr·ªã n√†y th√†nh m·ªôt gi√° tr·ªã duy nh·∫•t s·∫Ω g√¢y ra s·ª± kh√¥ng nh·∫•t qu√°n trong d·ªØ li·ªáu. N·∫øu ch·ªâ c·∫≠p nh·∫≠t "ProjectId" th√†nh m·ªôt gi√° tr·ªã duy nh·∫•t, v√≠ d·ª• nh∆∞ 113 ho·∫∑c 124, th√¨ th√¥ng tin v·ªÅ vi·ªác nh√¢n vi√™n tham gia v√†o nhi·ªÅu d·ª± √°n s·∫Ω b·ªã m·∫•t.
- C·ªôt "ProjectName": ƒêi·ªÉm d·ªã th∆∞·ªùng ·ªü ƒë√¢y l√† c·∫≠p nh·∫≠t gi√° tr·ªã c·ªßa c·ªôt "ProjectName" trong m·ªôt h√†ng. V√¨ c·ªôt "ProjectName" trong b·∫£ng ghi ƒë·∫ßu ti√™n ch·ª©a gi√° tr·ªã "BLUE STAR, MAGNUM", vi·ªác c·∫≠p nh·∫≠t gi√° tr·ªã n√†y th√†nh m·ªôt t√™n d·ª± √°n duy nh·∫•t s·∫Ω g√¢y ra s·ª± kh√¥ng nh·∫•t qu√°n trong d·ªØ li·ªáu. N·∫øu ch·ªâ c·∫≠p nh·∫≠t "ProjectName" th√†nh m·ªôt t√™n d·ª± √°n duy nh·∫•t, v√≠ d·ª• nh∆∞ "BLUE STAR" ho·∫∑c "MAGNUM", th√¨ th√¥ng tin v·ªÅ vi·ªác m·ªôt d·ª± √°n c√≥ nhi·ªÅu t√™n s·∫Ω b·ªã m·∫•t.

>L∆ØU √ù:
ƒêi·ªÉm d·ªã th∆∞·ªùng UPDATION tr√™n li√™n quan ƒë·∫øn vi·ªác c·∫≠p nh·∫≠t d·ªØ li·ªáu trong b·∫£ng, khi c·∫≠p nh·∫≠t gi√° tr·ªã c·ªßa c√°c c·ªôt "ProjectId" v√† "ProjectName" c√≥ th·ªÉ g√¢y ra s·ª± kh√¥ng nh·∫•t qu√°n v√† m·∫•t m√°t th√¥ng tin trong d·ªØ li·ªáu. ƒêi·ªÅu n√†y c·∫ßn ƒë∆∞·ª£c x·ª≠ l√Ω m·ªôt c√°ch c·∫©n th·∫≠n ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v√† b·∫£o to√†n d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu.

---

#### üîπƒêi·ªÉm d·ªã th∆∞·ªùng v·ªÅ REPEATION

- C·ªôt "ProjectId" v√† "ProjectName" trong b·∫£ng tr√™n ch·ª©a c√°c gi√° tr·ªã l·∫∑p l·∫°i. V√≠ d·ª•, d·ª± √°n c√≥ "ProjectId" l√† 113 v√† 124 c√≥ t√™n l√† "BLUE STAR, MAGNUM". ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn s·ª± l·∫∑p l·∫°i d·ªØ li·ªáu trong b·∫£ng.
- C·ªôt "Grade" t∆∞∆°ng ·ª©ng v·ªõi Salary trong b·∫£ng tr√™n c≈©ng ch·ª©a c√°c gi√° tr·ªã l·∫∑p l·∫°i. V√≠ d·ª•, nh√¢n vi√™n c√≥ "EmployeeId" l√† 109 v√† 263 ƒë·ªÅu c√≥ "Grade" l√† C v√† ƒë·ªÅu l√† 10,000. ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn s·ª± l·∫∑p l·∫°i d·ªØ li·ªáu trong b·∫£ng.

---

### üí• First Normal Form (1NF)

*   ƒê·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v√† chu·∫©n h√≥a d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu, c√°c ƒëi·ªÉm d·ªã th∆∞·ªùng INSERTION, DELETION v√† UPDATION c·∫ßn ƒë∆∞·ª£c x·ª≠ l√Ω m·ªôt c√°ch th√≠ch h·ª£p. ƒê·ªÉ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y, b·∫£ng c·∫ßn ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi th√†nh First Normal Form (1NF).
    
*   ƒê·ªÉ ƒë·∫°t ƒë∆∞·ª£c 1NF, b·∫£ng c·∫ßn th·ªèa m√£n c√°c ƒëi·ªÅu ki·ªán sau:
    
    *   C√°c gi√° tr·ªã trong m·ªói c·ªôt ph·∫£i l√† gi√° tr·ªã ƒë∆°n (Atomic value).
    *   C√°c gi√° tr·ªã trong m·ªói c·ªôt c√πng m·ªôt ki·ªÉu d·ªØ li·ªáu (Data type).
    *   C√°c h√†ng trong b·∫£ng ph·∫£i c√≥ m·ªôt `kh√≥a ch√≠nh duy nh·∫•t` ƒë·ªÉ x√°c ƒë·ªãnh m·ªôt c√°ch duy nh·∫•t m·ªói h√†ng d·ªØ li·ªáu trong b·∫£ng.


ƒê·ªÉ ƒë·∫°t ƒë∆∞·ª£c 1NF, n·∫øu c√≥ m·ªôt tr∆∞·ªùng c√≥ gi√° tr·ªã l·∫∑p l·∫°i trong m·ªôt h√†ng d·ªØ li·ªáu, ta c·∫ßn chia th√†nh c√°c b·∫£ng ri√™ng bi·ªát v√† t·∫°o quan h·ªá gi·ªØa ch√∫ng b·∫±ng c√°ch s·ª≠ d·ª•ng kh√≥a ch√≠nh v√† kh√≥a ngo·∫°i.

M·ª•c ti√™u c·ªßa chu·∫©n 1NF l√† lo·∫°i b·ªè c√°c ph·∫ßn t·ª≠ ƒëa tr·ªã (multivalued) v√† l·∫∑p l·∫°i (repeating) trong b·∫£ng d·ªØ li·ªáu, gi√∫p tƒÉng t√≠nh nh·∫•t qu√°n v√† hi·ªáu qu·∫£ trong vi·ªác truy xu·∫•t d·ªØ li·ªáu.


*   C√°ch l√†m nh∆∞ sau:
    
 ·ªû b·∫£ng tr√™n, c·ªôt "ProjectId" ch·ª©a nhi·ªÅu gi√° tr·ªã ph√¢n t√°ch b·∫±ng d·∫•u ph·∫©y. ƒê·ªÉ ƒë·∫°t chu·∫©n 1NF, ta c·∫ßn t√°ch c·ªôt n√†y th√†nh c√°c h√†ng ri√™ng bi·ªát.

 | EmployeeId | ProjectId | ProjectName | EmployeeName | Grade | Salary |
|------------|-----------|-------------|--------------|-------|--------|
| 142        | 113       | BLUE STAR   | John         | A     | 20,000 |
| 142        | 124       | MAGNUM      | John         | A     | 20,000 |
| 168        | 113       | BLUE STAR   | James        | B     | 15,000 |
| 263        | 113       | BLUE STAR   | Andrew       | C     | 10,000 |
| 109        | 124       | MAGNUM      | Bob          | C     | 10,000 |


### üí• Second Normal Form (2NF)

*   ƒê·ªÉ ƒë·∫°t ƒë∆∞·ª£c 2NF, b·∫£ng c·∫ßn th·ªèa m√£n c√°c ƒëi·ªÅu ki·ªán sau:
    
    *  ƒê·∫°t chu·∫©n 1NF
    *   C√°c c·ªôt kh√¥ng ph·∫£i l√† kh√≥a ch√≠nh (non-key columns) ph·∫£i ph·ª• thu·ªôc v√†o to√†n b·ªô kh√≥a ch√≠nh (entire primary key).
    *   X√¢y d·ª±ng m·ªëi quan h·ªá gi·ªØa c√°c b·∫£ng.

N·∫øu c√≥ tr∆∞·ªùng phi kh√≥a ph·ª• thu·ªôc v√†o m·ªôt ph·∫ßn c·ªßa kh√≥a ch√≠nh, ta c·∫ßn t√°ch b·∫£ng th√†nh c√°c b·∫£ng ri√™ng bi·ªát ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh ch·∫•t n√†y. B·∫±ng c√°ch n√†y, ta gi·∫£m thi·ªÉu s·ª± l·∫∑p l·∫°i d·ªØ li·ªáu v√† ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n trong c∆° s·ªü d·ªØ li·ªáu.

2NF l√† m·ªôt b∆∞·ªõc ti·∫øn quan tr·ªçng trong vi·ªác chu·∫©n h√≥a c∆° s·ªü d·ªØ li·ªáu v√† gi√∫p c·∫£i thi·ªán t√≠nh nh·∫•t qu√°n v√† hi·ªáu qu·∫£ trong vi·ªác truy xu·∫•t d·ªØ li·ªáu.


*   C√°ch l√†m nh∆∞ sau:
    
Trong b·∫£ng tr√™n, c·ªôt "ProjectName" ph·ª• thu·ªôc v√†o c·∫£ kh√≥a ch√≠nh {"EmployeeId", "ProjectId"} v√† kh√¥ng ph·ª• thu·ªôc v√†o b·∫•t k·ª≥ tr∆∞·ªùng phi kh√≥a n√†o kh√°c. 

V√¨ v·∫≠y, kh√¥ng c·∫ßn th·ª±c hi·ªán thay ƒë·ªïi.

---

### üí• Third Normal Form (3NF)

*   ƒê·ªÉ ƒë·∫°t ƒë∆∞·ª£c 3NF, b·∫£ng c·∫ßn th·ªèa m√£n c√°c ƒëi·ªÅu ki·ªán sau:
    
    *   C·∫ßn ƒë·∫°t ƒë∆∞·ª£c 2NF.
    *   T·∫•t c·∫£ c√°c tr∆∞·ªùng phi kh√≥a kh√¥ng ƒë∆∞·ª£c ph·ª• thu·ªôc v√†o nhau: ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† kh√¥ng c√≥ s·ª± ph·ª• thu·ªôc kh√¥ng c·∫ßn thi·∫øt gi·ªØa c√°c tr∆∞·ªùng phi kh√≥a.

N·∫øu c√≥ s·ª± ph·ª• thu·ªôc kh√¥ng c·∫ßn thi·∫øt gi·ªØa c√°c tr∆∞·ªùng phi kh√≥a, ta c·∫ßn t√°ch b·∫£ng th√†nh c√°c b·∫£ng ri√™ng bi·ªát ƒë·ªÉ lo·∫°i b·ªè s·ª± ph·ª• thu·ªôc kh√¥ng c·∫ßn thi·∫øt n√†y. B·∫±ng c√°ch n√†y, ta gi·∫£m thi·ªÉu s·ª± ph·ª• thu·ªôc kh√¥ng c·∫ßn thi·∫øt, lo·∫°i b·ªè s·ª± l·∫∑p l·∫°i d·ªØ li·ªáu v√† ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n trong c∆° s·ªü d·ªØ li·ªáu.

3NF l√† m·ªôt b∆∞·ªõc ti·∫øn quan tr·ªçng trong vi·ªác chu·∫©n h√≥a c∆° s·ªü d·ªØ li·ªáu v√† gi√∫p c·∫£i thi·ªán t√≠nh nh·∫•t qu√°n, hi·ªáu qu·∫£ v√† kh·∫£ nƒÉng b·∫£o tr√¨ c·ªßa c∆° s·ªü d·ªØ li·ªáu.


*   C√°ch l√†m nh∆∞ sau:

Trong b·∫£ng tr√™n, c·ªôt "Salary" ph·ª• thu·ªôc v√†o c·∫£ kh√≥a ch√≠nh {"EmployeeId", "ProjectId"} v√† c·ªôt "Grade" kh√¥ng ph·ª• thu·ªôc v√†o c·∫£ kh√≥a ch√≠nh. V√¨ v·∫≠y, ta c·∫ßn t√°ch b·∫£ng th√†nh hai b·∫£ng ri√™ng bi·ªát.

**üì∞ B·∫£ng "Employees":**

| EmployeeId | EmployeeName |
|------------|--------------|
| 142        | John         |
| 168        | James        |
| 263        | Andrew       |
| 109        | Bob          |

**üì∞ B·∫£ng "Projects":**

| ProjectId | ProjectName |
|-----------|-------------|
| 113       | BLUE STAR   |
| 124       | MAGNUM      |

**üì∞ B·∫£ng "EmployeeProjects":**

| EmployeeId | ProjectId | Grade | Salary |
|------------|-----------|-------|--------|
| 142        | 113       | A     | 20,000 |
| 142        | 124       | A     | 20,000 |
| 168        | 113       | B     | 15,000 |
| 263        | 113       | C     | 10,000 |
| 109        | 124       | C     | 10,000 |

---

## üíõSession 03 - Introduction to SQL Server 2019

- C√°ch c√†i ƒë·∫∑t ph·∫ßn m·ªÅm
  - SQL SERVER 2019 EXPRESS EDITION: https://www.microsoft.com/en-us/sql-server/sql-server-downloads --> T·∫£i b·∫£n Express
  - SQL SERVER MANAGEMENT STUDIO (SSMS): https://learn.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver16

- H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t: https://diadem.in/blog/sql-server-2019-express-installation


### Load Data m·∫´u:

B∆∞·ªõc 1: T·∫£i 2 file .sql v·ªÅ m√°y t√≠nh m√¨nh ·ªü th∆∞c m·ª•c `02.Examples-SQL\BikeStores`

- 1. BikeStores-Sample-Database-create-tables-Student.sql
- 2. BikeStores-Sample-Database-load-data-Student.sql

B∆∞·ªõc 2

- M·ªü Microsoft SQL Server Management Studio (MSSMS) l√™n.

- K·∫øt n·ªëi v·ªõi ch·∫ø ƒë·ªô x√°c th·ª±c l√† windown authentication

B∆∞·ªõc 3

- Menu FIle --> Open --> File (Ho·∫∑c Ctrl + O)
- Ch·ªçn file .sql ƒë√£ t·∫£i ·ªü tr√™n theo th·ª© t·ª± l·∫ßn l∆∞·ª£t

B∆∞·ªõc 4

- Ch·∫°y file s·ªë 1 tr∆∞·ªõc, sau ƒë√≥ ƒë·∫øn file s·ªë 2 b·∫±ng c√°ch nh·∫•n f5 (N√∫t Excute)

B∆∞·ªõc 5

Ki·ªÉm tra l·∫°i d·ªØ li·ªáu trong table b·∫±ng c√°ch, show m·ª•c table t·∫°i database, Click ph·∫£i l√™n table b·∫°n mu·ªën xem d·ªØ li·ªáu --> ch·ªçn `Select top 1000 rows`


## üíõ HomeWork Guide - Normalization
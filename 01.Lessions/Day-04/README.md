# Day 4
üí• üîπ
## üíõ Session 05- Creating and Managing Databases

### üí• Database (C∆° s·ªü d·ªØ li·ªáu) l√† g√¨? 

- M·ªôt Database l√† t·∫≠p h·ª£p c·ªßa r·∫•t nhi·ªÅu d·ªØ li·ªáu ph·∫£n √°nh th·∫ø gi·ªõi th·ª±c ho·∫∑c m·ªôt ph·∫ßn c·ªßa th·∫ø gi·ªõi th·ª±c.
- C√≥ c·∫•u tr√∫c, ƒë∆∞·ª£c l∆∞u tr·ªØ tu√¢n theo quy t·∫Øc d·ª±a tr√™n l√Ω thuy·∫øt to√°n h·ªçc.
- C√°c d·ªØ li·ªáu trong Database c√≥ li√™n quan v·ªõi nhau v·ªÅ m·ªôt lƒ©nh v·ª±c c·ª• th·ªÉ, ƒë∆∞·ª£c t·ªï ch·ª©c ƒë·∫∑c bi·ªát cho vi·ªác l∆∞u tr·ªØ, t√¨m ki·∫øm v√† tr√≠ch xu·∫•t d·ªØ li·ªáu.
- ƒê∆∞·ª£c c√°c H·ªá c∆° s·ªü d·ªØ li·ªáu khai th√°c x·ª≠ l√Ω, t√¨m ki·∫øm, tra c·ª©u, s·ª≠a ƒë·ªïi, b·ªï sung hay lo·∫°i b·ªè d·ªØ li·ªáu trong Database.

·ªû m·ª©c logic, m·ªôt DATABASE g·ªìm nhi·ªÅu b·∫£ng (TABLE), m·ªói b·∫£ng ƒë∆∞·ª£c x√°c ƒë·ªãnh b·∫±ng m·ªôt t√™n, b·∫£ng ch·ª©a d·ªØ li·ªáu c√≥ c·∫•u tr√∫c v√† c√°c r√†ng bu·ªôc (CONSTRAINT) ƒë·ªãnh nghƒ©a tr√™n c√°c b·∫£ng. Ngo√†i ra, Database c√≤n c√≥ khung nh√¨n (VIEW), c√°c th·ªß t·ª•c/ h√†m‚Ä¶.

·ªû m·ª©c v·∫≠t l√Ω, DATABASE c·ªßa SQL Server ƒë∆∞·ª£c l∆∞u tr·ªØ d∆∞·ªõi 3 lo·∫°i t·∫≠p tin: 

- T·∫≠p tin d·ªØ li·ªáu (Data-file): g·ªìm 1 t·∫≠p tin l∆∞u tr·ªØ d·ªØ li·ªáu ch√≠nh (`*.mdf`) ch·ª©a c√°c d·ªØ li·ªáu kh·ªüi ƒë·∫ßu v√† c√°c t·∫≠p tin d·ªØ li·ªáu th·ª© c·∫•p (`*.ndf`) ch·ª©a d·ªØ li·ªáu ph√°t sinh ho·∫∑c kh√¥ng l∆∞u h·∫øt trong t·∫≠p tin l∆∞u tr·ªØ ch√≠nh.
- T·∫≠p tin nh·∫≠t k√Ω thao t√°c (`*.ldf`) ch·ª©a th√¥ng tin giao t√°c, th∆∞·ªùng d√πng ƒë·ªÉ kh√¥i ph·ª•c Database n·∫øu x·∫£y ra s·ª± c·ªë. 

---

### üí•T·∫°i sao ph·∫£i t·∫°o Database?

Nh∆∞ vi·ªác truy xu·∫•t, ƒë√≥ng m·ªü t·∫≠p tin th√¥ng th∆∞·ªùng, b·∫°n c·∫ßn t·∫°o file l∆∞u tr·ªØ tr∆∞·ªõc khi truy xu·∫•t. T∆∞∆°ng t·ª± v·∫≠y, b·∫°n c·∫ßn t·∫°o m·ªôt DATABASE ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu trong SQL Server ƒë·ªÉ ti·ªán cho vi·ªác truy v·∫•n sau n√†y.

SQL Server s·∫Ω gi√∫p b·∫°n qu·∫£n l√Ω, truy xu·∫•t nh·ªØng d·ªØ li·ªáu n√†y m·ªôt c√°ch c√≥ c·∫•u tr√∫c v√† d·ªÖ d√†ng h∆°n.

---

### üí• C√°ch t·∫°o Database?

#### üîπ T·∫°o b·∫±ng giao di·ªán ƒë·ªì h·ªça GUI


#### üîπ T·∫°o b·∫±ng d√≤ng l·ªánh 

```sql
CREATE DATABASE  <database_name>
```

Trong ƒë√≥ database_name l√† t√™n m√† b·∫°n ƒë·∫∑t cho Database b·∫°n mu·ªën t·∫°o

---

### üí• X√≥a m·ªôt Database?

#### üîπ X√≥a b·∫±ng giao di·ªán ƒë·ªì h·ªça GUI


#### üîπ X√≥a b·∫±ng d√≤ng l·ªánh 

```sql
DROP DATABASE <database_name>
```
Trong ƒë√≥ database_name l√† t√™n Database b·∫°n mu·ªën x√≥a

---

### üí• Comment trong SQL Query

ƒê·ªÉ t·∫°o COMMENT trong SQL, ch√∫ng ta s·ª≠ d·ª•ng c√∫ ph√°p

```sql
--N·ªôi dung Comment
```
---

### üí• Backup v√† Restore M·ªôt Database


//////////////////////////////////////////////////////////////////////////////////////

## üíõ Session 06- Creating Tables


### üí• TaÃ£i sao phaÃâi taÃ£o Table?


Trong b√†i tr∆∞·ªõc, ch√∫ng ta ƒë√£ bi·∫øt DATABASE ( C∆° s·ªü d·ªØ li·ªáu) d√πng ƒë·ªÉ l∆∞u tr·ªØ th√¥ng tin, truy xu·∫•t d·ªØ li·ªáu khi c·∫ßn thi·∫øt. V·∫≠y l√†m sao ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu trong Database? L√†m sao ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu ƒë√£ l∆∞u?

>B√†i to√°n th·ª±c t·∫ø ƒë·∫∑t ra: 
>
>Khi mu·ªën qu·∫£n l√Ω m·ªôt tr∆∞·ªùng h·ªçc, b·∫°n s·∫Ω c·∫ßn qu·∫£n l√Ω nh·ªØng g√¨? Danh s√°ch gi√°o vi√™n, danh s√°ch h·ªçc sinh, ƒëi·ªÉm thi, qu√° tr√¨nh c√¥ng t√°c, ph√≤ng ban‚Ä¶. V√† khi truy v·∫•n th√¨ c·∫ßn truy v·∫•n nh∆∞ th·ªÉ n√†o v·ªõi c√°c th√¥ng tin ƒë√≥?

V·∫≠y khi t·∫•t c·∫£ d·ªØ li·ªáu c√πng n·∫±m trong m·ªôt Database th√¨ c·∫ßn c√≥ m·ªôt c√°ch t·ªï ch·ª©c th·ªÉ hi·ªán c√°c th√¥ng tin theo m·ªôt h·ªá th·ªëng l∆∞u tr·ªØ, ƒë√≥ ch√≠nh l√† TABLE ‚Äì B·∫£ng.

M·ªôt Database bao g·ªìm nhi·ªÅu Table, gi·ªØa c√°c Table c√≥ m·ªëi li√™n h·ªá v·ªõi nhau th·ªÉ hi·ªán qua KH√ìA CH√çNH & KH√ìA NGO·∫†I. 

---

### üí• V√¢Ã£y Table (BaÃâng) laÃÄ giÃÄ?

L√† ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c Database s·ª≠ d·ª•ng ƒë·ªÉ t·ªï ch·ª©c v√† l∆∞u tr·ªØ d·ªØ li·ªáu.

M·ªói Table trong Database c√≥ th·ªÉ li√™n k·∫øt v·ªõi m·ªôt ho·∫∑c nhi·ªÅu Table kh√°c, ·ªü m·ªôt ho·∫∑c nhi·ªÅu thu·ªôc t√≠nh

---

### üí• C√°ch t·∫°o Table

#### üîπ T·∫°o b·∫±ng giao di·ªán ƒë·ªì h·ªça GUI


#### üîπ T·∫°o b·∫±ng d√≤ng l·ªánh 

T·∫°o Table v·ªõi c√°c column, CONSTRAINT ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a ngay khi t·∫°o m·ªõi Table

```sql
--Create table Categories
CREATE TABLE [dbo].[Categories] (
  [Id] INT IDENTITY(1,1) PRIMARY KEY NOT NULL, --Kh√≥a ch√≠nh t·ª± tƒÉng
  [Name] NVARCHAR(50) UNIQUE NOT NULL,
  [Description] NVARCHAR(500) NULL,
);
GO
--Create table  Products
CREATE TABLE [dbo].[Products] (
  [Id] INT IDENTITY(1,1) NOT NULL, --T·ª± tƒÉng
  [Name] NVARCHAR(100) NOT NULL,
  [Price] MONEY NOT NULL,
  [Discount] DECIMAL(18,2) NOT NULL,
  [Stock] DECIMAL(18,2) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [CategoryId] INT NOT NULL,
  [SupplierId] INT NOT NULL
);
GO

```

L∆∞u √Ω v·ªõi c√°c table c√≥ quan h·ªá, ch·ª© kh√≥a ngo·∫°i th√¨ b·∫°n c·∫ßn t·∫°o table tham chi·∫øu tr∆∞·ªõc. Trong v√≠ d·ª• tr√™n b·∫°n ph·∫£i t·∫°o table Categories, Suppliers tr∆∞·ªõc khi t·∫°o Products

---

### üí• C√°ch X√≥a Table

#### üîπ X√≥a b·∫±ng giao di·ªán ƒë·ªì h·ªça GUI


#### üîπ X√≥a b·∫±ng d√≤ng l·ªánh 

```sql
-- X√≥a table Categories, N·∫øu table kh√¥ng t·ªìn t·∫°i th√¨ g√¢y l·ªói
DROP TABLE [dbo].[Categories];
-- X√≥a table Categories v·ªõi m·ªánh ƒë·ªÅ IF EXISTS ƒë·ªÉ check t·ªìn t·∫°i th√¨ m·ªõi x√≥a, ==> tr√°nh l·ªói
DROP TABLE IF EXISTS [dbo].[Categories];
```
---

### üí• Alert Table

C√°c thao t√°c n√†y b·∫°n c√≥ th·ªÉ th·ª±c hi·ªán v·ªõi giao di·ªán ƒë·ªì h·ªça GUI

#### üîπ Th√™m m·ªôt Column Table

```sql
--Th√™m v√†o table Customers m·ªôt c·ªôt Email
ALTER TABLE Customers
ADD Email varchar(255);
```

#### üîπ X√≥a m·ªôt Column Table

```sql
--X√≥a c·ªôt Email t·ª´ table Customers
ALTER TABLE Customers
DROP COLUMN Email;
```

#### üîπ Thay ƒë·ªïi t√™n c·ªßa Column Table

```sql
ALTER TABLE table_name
RENAME COLUMN old_name to new_name;
```

#### üîπ Thay ƒë·ªïi Data Type c·ªßa Column Table

```sql
ALTER TABLE Customers
ALTER COLUMN Email nvarchar(255);
```

---

### üí• SQL CONSTRAINT

CONSTRAINT (r√†ng bu·ªôc) l√† m·ªôt kh·ªëi m√£ ho·∫∑c m·ªôt quy t·∫Øc ƒë∆∞·ª£c √°p d·ª•ng cho m·ªôt ho·∫∑c nhi·ªÅu c·ªôt trong m·ªôt b·∫£ng ƒë·ªÉ ƒë·ªãnh nghƒ©a v√† b·∫£o v·ªá t√≠nh to√†n v·∫πn d·ªØ li·ªáu. R√†ng bu·ªôc ƒë·ªãnh nghƒ©a c√°c quy t·∫Øc v√† gi·ªõi h·∫°n cho d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ trong c∆° s·ªü d·ªØ li·ªáu.

C√°c CONSTRAINT ph·ªï bi·∫øn:

#### üîπ PRIMARY KEY

Primary key (Kh√≥a ch√≠nh) l√† m·ªôt thu·ªôc t√≠nh ho·∫∑c t·∫≠p h·ª£p c√°c thu·ªôc t√≠nh trong m·ªôt b·∫£ng d√πng ƒë·ªÉ ƒë·ªãnh danh duy nh·∫•t m·ªói h√†ng trong b·∫£ng ƒë√≥. Kh√≥a ch√≠nh ƒë·∫£m b·∫£o t√≠nh duy nh·∫•t v√† x√°c ƒë·ªãnh c·ªßa c√°c b·∫£n ghi trong b·∫£ng

L√† s·ª± k·∫øt h·ª£p gi·ªØa 2 CONSTRAINT `UNIQUE` v√† `NOT NULL`

```sql
-- ƒê·ªãnh nghƒ©a PRIMARY KEY ngay khi t·∫°o table
CREATE TABLE [dbo].[Products] (
    Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL
)
-- ƒê·ªãnh nghƒ©a PRIMARY KEY cho table ƒë√£ t·ªìn t·∫°i
ALTER TABLE [dbo].[Products]
ADD PRIMARY KEY (Id);
-- Ho·∫∑c, b·∫°n c√≥ th·ªÉ ƒë·∫∑t t√™n cho contraint l√† PK_Products
ALTER TABLE [dbo].[Products]
ADD CONSTRAINT [PK_Products] PRIMARY KEY ([Id]);
```


#### üîπ FOREIGN KEY 

- Foreign key (kh√≥a ngo·∫°i) l√† m·ªôt c·ªôt ho·∫∑c t·∫≠p h·ª£p c√°c c·ªôt trong m·ªôt b·∫£ng tham chi·∫øu ƒë·∫øn kh√≥a ch√≠nh c·ªßa m·ªôt b·∫£ng kh√°c. Kh√≥a ngo·∫°i t·∫°o ra m·ªôt m·ªëi quan h·ªá gi·ªØa hai b·∫£ng d·ª±a tr√™n gi√° tr·ªã c·ªßa c·ªôt ho·∫∑c c√°c c·ªôt ƒë∆∞·ª£c li√™n k·∫øt.

- B·∫£ng ch·ª©a kh√≥a ngo·∫°i ƒë∆∞·ª£c g·ªçi l√† b·∫£ng tham chi·∫øu ho·∫∑c b·∫£ng con. V√† b·∫£ng ƒë∆∞·ª£c tham chi·∫øu b·ªüi kh√≥a ngo·∫°i ƒë∆∞·ª£c g·ªçi l√† b·∫£ng ƒë∆∞·ª£c tham chi·∫øu ho·∫∑c b·∫£ng cha.

- M·ªôt b·∫£ng c√≥ th·ªÉ c√≥ nhi·ªÅu kh√≥a ngo·∫°i t√πy thu·ªôc v√†o m·ªëi quan h·ªá c·ªßa n√≥ v·ªõi c√°c b·∫£ng kh√°c.

- B·∫°n x√°c ƒë·ªãnh kh√≥a ngo·∫°i b·∫±ng c√°ch s·ª≠ d·ª•ng r√†ng bu·ªôc kh√≥a ngo·∫°i. R√†ng bu·ªôc kh√≥a ngo·∫°i gi√∫p duy tr√¨ t√≠nh to√†n v·∫πn tham chi·∫øu c·ªßa d·ªØ li·ªáu gi·ªØa b·∫£ng con v√† b·∫£ng cha.

- R√†ng bu·ªôc kh√≥a ngo·∫°i ch·ªâ ra r·∫±ng c√°c gi√° tr·ªã trong m·ªôt c·ªôt ho·∫∑c m·ªôt nh√≥m c·ªôt trong b·∫£ng con b·∫±ng v·ªõi c√°c gi√° tr·ªã trong m·ªôt c·ªôt ho·∫∑c m·ªôt nh√≥m c·ªôt c·ªßa b·∫£ng cha.

```sql
-- T·∫°o kh√≥a ngo·∫°i CategoryID, SupplierId ngay khi t·∫°o m·ªõi Table
CREATE TABLE [dbo].[Products] (
  [Id] INT IDENTITY(1,1) PRIMARY KEY NOT NULL, --Kh√≥a ch√≠nh t·ª± tƒÉng
  [Name] NVARCHAR(100) UNIQUE NOT NULL, --UNIQUE
  [Price] MONEY NOT NULL,
  [Discount] DECIMAL(18,2) NOT NULL,
  [Stock] DECIMAL(18,2) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [CategoryId] INT NOT NULL,
  [SupplierId] INT NOT NULL,
  CONSTRAINT fk_Products_CategoryID FOREIGN KEY (CategoryID) 
        REFERENCES Categories(Id), --Kh√≥a ngo·∫°i CategoryID
  CONSTRAINT fk_Products_SupplierId FOREIGN KEY (SupplierId) 
        REFERENCES Suppliers(Id) --Kh√≥a ngo·∫°i SupplierId
);
```

Ho·∫∑c b·∫°n c√≥ th·ªÉ t·∫°o kh√≥a ngo·∫°i cho m·ªôt table ƒë√£ t·ªìn t·∫°i

```sql
--T·∫°o kh√≥a ngo·∫°i  FOREIGN KEY (CategoryId) tham chi·∫øu ƒë·∫øn kh√≥a ch√≠nh Categories(Id)
ALTER TABLE [dbo].[Products]
ADD CONSTRAINT [FK_Products_Categories] FOREIGN KEY ([CategoryId]) REFERENCES [dbo].[Categories] ([Id]);
GO
--T·∫°o kh√≥a ngo·∫°i FOREIGN KEY (SupplierId) tham chi·∫øu ƒë·∫øn kh√≥a ch√≠nh Suppliers(Id)
ALTER TABLE [dbo].[Products]
ADD CONSTRAINT [FK_Products_Suppliers] FOREIGN KEY ([SupplierId]) REFERENCES [dbo].[Suppliers] ([Id]);
```

#### üîπ UNIQUE

SQL cung c·∫•p cho b·∫°n r√†ng bu·ªôc UNIQUE ƒë·ªÉ duy tr√¨ t√≠nh duy nh·∫•t c·ªßa d·ªØ li·ªáu m·ªôt c√°ch ch√≠nh x√°c.

Khi c√≥ r√†ng bu·ªôc UNIQUE, m·ªói khi b·∫°n ch√®n m·ªôt h√†ng m·ªõi, n√≥ s·∫Ω ki·ªÉm tra xem gi√° tr·ªã ƒë√£ c√≥ trong b·∫£ng ch∆∞a. N√≥ t·ª´ ch·ªëi thay ƒë·ªïi v√† ƒë∆∞a ra l·ªói n·∫øu gi√° tr·ªã ƒë√£ t·ªìn t·∫°i. Qu√° tr√¨nh t∆∞∆°ng t·ª± ƒë∆∞·ª£c th·ª±c hi·ªán ƒë·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu hi·ªán c√≥.

```sql
--T·∫°o UNIQUE ngay khi t·∫°o m·ªõi table
CREATE TABLE [dbo].[Categories] (
  [Id] INT IDENTITY(1,1) PRIMARY KEY NOT NULL, --Kh√≥a ch√≠nh t·ª± tƒÉng
  [Name] NVARCHAR(50) UNIQUE NOT NULL, -- UNIQUE
  [Description] NVARCHAR(500) NULL,
);
GO
```

B·∫°n c≈©ng c√≥ th·ªÉ t·∫°o UNIQUE cho m·ªôt table ƒë√£ t·ªìn t·∫°i

```sql
ALTER TABLE [dbo].[Categories]
ADD CONSTRAINT [UQ_Categories_Name] UNIQUE ([Name]); --UQ_Categories_Name l√† t√™n b·∫°n ƒë·∫∑t cho CONTRAINT
GO
```

#### üîπ NOT NULL

Trong l√Ω thuy·∫øt c∆° s·ªü d·ªØ li·ªáu, NULL ƒë·∫°i di·ªán cho th√¥ng tin ch∆∞a bi·∫øt ho·∫∑c thi·∫øu th√¥ng tin. NULL kh√¥ng gi·ªëng nh∆∞ m·ªôt chu·ªói tr·ªëng ho·∫∑c s·ªë 0.

Gi·∫£ s·ª≠ b·∫°n c·∫ßn ch√®n ƒë·ªãa ch·ªâ email c·ªßa m·ªôt li√™n h·ªá v√†o b·∫£ng. B·∫°n c√≥ th·ªÉ y√™u c·∫ßu ƒë·ªãa ch·ªâ email c·ªßa ng∆∞·ªùi ƒë√≥. Tuy nhi√™n, n·∫øu b·∫°n kh√¥ng bi·∫øt ng∆∞·ªùi li√™n h·ªá ƒë√≥ c√≥ ƒë·ªãa ch·ªâ email hay kh√¥ng, b·∫°n c√≥ th·ªÉ ch√®n NULL v√†o c·ªôt ƒë·ªãa ch·ªâ email. Trong tr∆∞·ªùng h·ª£p n√†y, NULL ch·ªâ ra r·∫±ng ƒë·ªãa ch·ªâ email kh√¥ng ƒë∆∞·ª£c bi·∫øt t·∫°i th·ªùi ƒëi·ªÉm ghi.

NULL r·∫•t ƒë·∫∑c bi·ªát. N√≥ kh√¥ng b·∫±ng b·∫•t c·ª© th·ª© g√¨, k·ªÉ c·∫£ ch√≠nh n√≥. Bi·ªÉu th·ª©c NULL = NULL tr·∫£ v·ªÅ NULL v√¨ ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† hai gi√° tr·ªã ch∆∞a bi·∫øt kh√¥ng ƒë∆∞·ª£c b·∫±ng nhau.

ƒê·ªãnh nghƒ©a NOT NULL ngay khi t·∫°o m·ªõi table

```sql
CREATE TABLE [dbo].[Categories] (
  [Id] INT IDENTITY(1,1) PRIMARY KEY NOT NULL, --Kh√≥a ch√≠nh t·ª± tƒÉng
  [Name] NVARCHAR(50) UNIQUE NOT NULL, -- UNIQUE
  [Description] NVARCHAR(500) NULL,
);
GO
```
Ho·∫∑c cho table ƒë√£ t·ªìn t·∫°i

```sql
ALTER TABLE [dbo].[Categories]
ALTER COLUMN [Name] NVARCHAR(50) UNIQUE NOT NULL;
```


#### üîπ DEFAULT

DEFAULT l√† m·ªôt thu·ªôc t√≠nh ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c∆° s·ªü d·ªØ li·ªáu ƒë·ªÉ ƒë·ªãnh nghƒ©a gi√° tr·ªã m·∫∑c ƒë·ªãnh cho m·ªôt c·ªôt khi kh√¥ng c√≥ gi√° tr·ªã n√†o ƒë∆∞·ª£c cung c·∫•p trong qu√° tr√¨nh ch√®n d·ªØ li·ªáu m·ªõi ho·∫∑c c·∫≠p nh·∫≠t d·ªØ li·ªáu trong c·ªôt ƒë√≥.

ƒê·ªãnh nghƒ©a `DEFAULT CONTRAINT` ngay khi t·∫°o m·ªõi Table

Price, Discount, Stock m·∫∑c ƒë·ªãnh = 0

```sql
CREATE TABLE [dbo].[Products] (
  [Id] INT IDENTITY(1,1) PRIMARY KEY NOT NULL, --T·ª± tƒÉng
  [Name] NVARCHAR(100) UNIQUE NOT NULL,
  [Price] MONEY NOT NULL DEFAULT 0,
  [Discount] DECIMAL(18,2) DEFAULT 0 NOT NULL,
  [Stock] DECIMAL(18,2) DEFAULT 0 NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [CategoryId] INT NOT NULL,
  [SupplierId] INT NOT NULL,
  CONSTRAINT fk_Products_CategoryID FOREIGN KEY (CategoryID) 
        REFERENCES Categories(Id), --Kh√≥a ngo·∫°i CategoryID
  CONSTRAINT fk_Products_SupplierId FOREIGN KEY (SupplierId) 
        REFERENCES Suppliers(Id) --Kh√≥a ngo·∫°i SupplierId

);
GO

```

#### üîπ CHECK

Check Contraint l√† m·ªôt lo·∫°i r√†ng bu·ªôc cho ph√©p b·∫°n ch·ªâ ƒë·ªãnh xem c√°c gi√° tr·ªã trong m·ªôt c·ªôt c√≥ ph·∫£i ƒë√°p ·ª©ng m·ªôt y√™u c·∫ßu c·ª• th·ªÉ hay kh√¥ng.

N·∫øu c√°c gi√° tr·ªã v∆∞·ª£t qua qu√° tr√¨nh ki·ªÉm tra, PostgreSQL s·∫Ω ch√®n ho·∫∑c c·∫≠p nh·∫≠t c√°c gi√° tr·ªã n√†y v√†o c·ªôt. N·∫øu kh√¥ng, PostgreSQL s·∫Ω t·ª´ ch·ªëi c√°c thay ƒë·ªïi v√† ƒë∆∞a ra l·ªói vi ph·∫°m r√†ng bu·ªôc.


T·∫°o table  Products FULL C√°c CONTRAINT, ngay khi t·∫°o m·ªõi

```sql
CREATE TABLE [dbo].[Products] (
  [Id] INT IDENTITY(1,1) PRIMARY KEY NOT NULL, --T·ª± tƒÉng
  [Name] NVARCHAR(100) UNIQUE NOT NULL,
  [Price] MONEY NOT NULL DEFAULT 0 CHECK (Price >=0),
  [Discount] DECIMAL(18,2) DEFAULT 0 NOT NULL CHECK (Discount >=0 AND Discount <= 80),
  [Stock] DECIMAL(18,2) DEFAULT 0 NOT NULL CHECK (Stock >=0),
  [Description] NVARCHAR(MAX) NULL,
  [CategoryId] INT NOT NULL,
  [SupplierId] INT NOT NULL,
  CONSTRAINT fk_Products_CategoryID FOREIGN KEY (CategoryID) 
        REFERENCES Categories(Id), --Kh√≥a ngo·∫°i CategoryID
  CONSTRAINT fk_Products_SupplierId FOREIGN KEY (SupplierId) 
        REFERENCES Suppliers(Id) --Kh√≥a ngo·∫°i SupplierId

);
GO

```

B·∫°n c≈©ng c√≥ th·ªÉ t·∫°o CONTRAINT CHECK cho table ƒë√£ t·ªìn t·∫°i


```sql
-- Create CHECK (Price > 0)
ALTER TABLE [dbo].[Products]
ADD CONSTRAINT [CK_Products_Price] CHECK ([Price] > 0);
GO

--Create CHECK (Discount >= 0 AND Discount <= 90)
ALTER TABLE [dbo].[Products]
ADD CONSTRAINT [CK_Products_Discount] CHECK ([Discount] >= 0 AND [Discount] <= 90);
GO
--Create CHECK (Stock >= 0)
ALTER TABLE [dbo].[Products]
ADD CONSTRAINT [CK_Products_Stock] CHECK ([Stock] >= 0);
GO
```


## üíõHomeworks Guide - Session 2-3-4





